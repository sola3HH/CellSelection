<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<title></title>
	<script src="js/vue.js" type="text/javascript" charset="utf-8">
	</script>
	<link rel="stylesheet" href="leaflet/leaflet.css" />
	<script src="leaflet/leaflet.js" type="text/javascript" charset="utf-8"></script>
	<link rel="stylesheet" href="css/general.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
		integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
		integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
		integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
		integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
		crossorigin="anonymous"></script>
</head>

<body style="background-color: #273c75;">
	<h1 id="title">Cell Selection Simulation</h1>
	<div id="mainGroup">
		<div class="row" style="margin: 0 0.5rem;">
			<div id="map" class="col-6"></div>


			<div class="col-6">
				<div class="card configCard">
					<div class="card-body">
						<h5 class="card-title">Control center</h5>

						<!--Avatar's Position-->
						<p class="card-text">
							Avatar's Position: x:
							<input type="text" class="form-control" placeholder="51.505">
							y:
							<input type="text" class="form-control" placeholder="-0.09">
						</p>
						<a href="#" class="btn btn-primary">Confirm</a>

						<!--Set Random Antennas with a given number-->
						<div id="RandomAnts">
							<p>Random antennas number:
								<input type="text" class="form-control" v-model="antennasNum">
							</p>
							<a href="#" class="btn btn-primary" v-on:click="AddAntennas">Confirm</a>
						</div>
						<!-- Add Markers-->
						<div id="AddMarker">
							<p class="card-text">
								Add a marker: x:
								<input type="text" class="form-control" v-model="markerX">
								y:
								<input type="text" class="form-control" v-model="markerY">
							</p>
							<a href="#" class="btn btn-primary" v-on:click="AddM">Confirm</a>
						</div>
						<!-- Avatar State -->
						<div id="AvatarState">
							<p>Signal Power:{{Power}}	</p> 
							<p>Link Antenna:{{AntennaNum}}</p>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>




	<script>
		var mymap = L.map('map').setView([51.505, -0.09], 13);
		// Create the map with leaflet API.
		//default token to mapBox: pk.eyJ1IjoibHllZWUiLCJhIjoiY2thNGYxbWQzMGNuODNvb2FidGc2cW5wMCJ9.rl6UKu71UtwYQKibnUG-Sg
		L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
			attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
			maxZoom: 18,
			id: 'mapbox/streets-v11',
			tileSize: 512,
			zoomOffset: -1,
			accessToken: 'pk.eyJ1IjoibHllZWUiLCJhIjoiY2thNGYxbWQzMGNuODNvb2FidGc2cW5wMCJ9.rl6UKu71UtwYQKibnUG-Sg'
		}).addTo(mymap);

		var AddMarker = new Vue({
			el: '#AddMarker',
			data: {
				markerX: 51.505,
				markerY: -0.09
			},
			methods: {
				AddM: function (event) {
					var marker = L.marker([this.markerX, this.markerY]).addTo(mymap);
				}
			}
		})
		var SetAntennas = new Vue({
			el: '#RandomAnts',
			data: {
				antennasNum: 1
			},
			methods: {
				AddAntennas: function (event) {
					var distance = 0.01/this.antennasNum;
					
					// create a red polygon from an array of LatLng points
                    //伦敦纬度51°30′，cos=0.622，所有涉及经度的计算都需要除以0.622
					var latlngs = [[51.505+distance*1.73/2, -0.09+distance/(2*0.622)], [51.505, -0.09+distance/0.622],
					[51.505-distance*1.73/2, -0.09+distance/(2*0.622)], [51.505-distance*1.73/2, -0.09-distance/(2*0.622)],
					[51.505, -0.09-distance/0.622],[51.505+distance*1.73/2, -0.09-distance/(2*0.622)]];
					var polygon = L.polygon(latlngs, { color: 'red' }).addTo(mymap);
					// zoom the map to the polygon
					mymap.fitBounds(polygon.getBounds());
				}
			}
		})
		var AvatarState = new Vue({
			el: '#AvatarState',
			data: {
				Power: 3,
				AntennaNum:1
			},
			//利用回调函数改变属性的值。
		})

	</script>
</body>

</html>